(this.webpackJsonpsolitaire=this.webpackJsonpsolitaire||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(55),a=n.n(c),u=n(3),o=n(60),l=n(4),s=n(56),d=n.n(s),f=n(57),m=n.n(f),p=n(7),x=n.n(p),v=n(58),h=n.n(v),b=n(59),I=n.n(b),j="987654321".split("").map((function(e){return[{value:Number(e),suit:0},{value:Number(e),suit:1},{value:Number(e),suit:2},{value:Number(e),suit:3}]})).flat(),O=("987654321".split("").map((function(e){return{value:Number(e),suit:0}})).concat("987654321".split("").map((function(e){return{value:Number(e),suit:1}}))),function(){return m()(d()(j),6).map((function(e,t){return e.map((function(e,n){return Object(l.a)({},e,{cardPileIndex:n,pileIndex:t})}))})).flat().map((function(e,t){return Object(l.a)({},e,{index:t})}))}),E=function(e){return e.filter((function(t,n){return!e[n+1]||t===e[n+1]+1})).length===e.length},y=function(e,t,n){var r=w(t,e);if(t.isFinished||!n||n.isFinished)return e;var i=r.length-t.cardPileIndex,c=1===i&&!t.isCheat&&!n.isCheat,a=t.value!==n.value-1&&!n.isEmpty,u=r.slice(t.cardPileIndex,t.cardPileIndex+i),s=n.isEmpty||!n.isCheat&&E([n.value].concat(Object(o.a)(u.map((function(e){return e.value})))));return e.map((function(e){if(e.pileIndex!==t.pileIndex||t.pileIndex===n.pileIndex)return e;if(!u.map((function(e){return e.index})).includes(e.index))return e;if((s||c)&&!Number.isNaN(n.pileIndex)){var r=n.cardPileIndex+u.findIndex((function(t){return t.index===e.index}))+1;return Object(l.a)({},e,{pileIndex:n.pileIndex,cardPileIndex:r,isCheat:a})}return e}))};function g(e,t){var n=!1;return e&&(n=e.pileIndex===t.pileIndex&&e.cardPileIndex<=t.cardPileIndex),n}var w=function(e,t){return t.filter((function(t){return t.pileIndex===e.pileIndex})).sort((function(e,t){return e.cardPileIndex-t.cardPileIndex}))},P=function(e,t){if(!e)return null;if(e.isEmpty)return e;var n=w(e,t);return e=n[n.length-1],Y(e,t)},S=function(e,t){var n=w(e,t),r=n.map((function(e){return e.value})).slice(e.cardPileIndex,n.length);return E(r)},N=function(e,t){Object(r.useEffect)((function(){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}}),[e,t])},R=function(e,t,n){var r,i=document.elementFromPoint(e,t);if(i&&i.parentElement){var c=i.parentElement.dataset.index;if(c)r=n[+c];else{var a={cardPileIndex:-1,pileIndex:+i.parentElement.dataset.pileindex,isEmpty:!0};if(0===w(a,n).length)return Object(l.a)({},a,{},k(a))}}return Y(r,n)},Y=function(e,t){return e?Object(l.a)({},e,{},k(e,w(e,t).length),{canMove:S(e,t),isActive:g(e,t)}):null},M=function(){var e=Object(r.useState)(0),t=Object(u.a)(e,2)[1];return function(){return t((function(e){return++e}))}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=x()(document.documentElement.clientWidth,740),n=x()(document.documentElement.clientHeight,740),r=document.querySelector(".card"),i=r.clientWidth,c=r.clientHeight,a=(t-6*i)/7,u=i+a,o=n<500?x()(e-10,0,10):0,l=n/15,s=t>450?30:20,d=x()(l-o,s),f=x()((n-(6.5*(d+o)+c))/2,40,1e3);return{width:u,height:d,yBuffer:f,xBuffer:a}},k=function(e,t){var n=X(t),r=n.width,i=n.height,c=n.yBuffer,a=n.xBuffer,u=(document.documentElement.clientWidth-(6*r-a))/2;return{x:e.pileIndex*r+u,y:e.isEmpty?c:c+(e.isFinished?0:e.cardPileIndex*i)}},C=n(8),F=n(20),D=n.n(F),A=["spades","clubs","hearts","diamonds"],B={stiffness:200,damping:20},z=i.a.memo((function(e){var t=e.card,n=e.activeCard,r=e.pileSize,c=e.isActive,a=e.isFinished,u=e.canMove,o=e.onRest,s=void 0===o?function(){}:o,d=e.mouseX,f=void 0===d?-1:d,m=e.mouseY,p=void 0===m?-1:m;N("resize",D()(M(),500));var x=X(r),v=x.height,h=x.xBuffer,b=x.width,I=k(Object(l.a)({},t,{isFinished:a}),r),j=I.x,O=I.y,E=f>-1?v*Math.abs(n.cardPileIndex-t.cardPileIndex):0,y=f>-1?f:Object(C.spring)(j,B),g=p>-1?p+E:Object(C.spring)(O,B),w=Object(C.spring)(t.isCheat?17:0,B),P=Object(C.spring)(c?1.185:1,B),S=a?-1:f>-1?35+t.cardPileIndex:t.cardPileIndex,R=["card","rank".concat(t.value),a&&"finished",u&&"can-move",c&&"disable-touch",t.isEmpty&&"empty",A[t.suit]];return i.a.createElement(C.Motion,{style:{x:y,y:g,r:w,s:P},onRest:s},(function(e){var n=e.x,r=e.y,c=e.r,a=e.s;return i.a.createElement("div",{"data-index":t.index,"data-pileindex":t.pileIndex,className:R.join(" "),style:{transform:"translate3d(".concat(n,"px, ").concat(r,"px, 0) rotate(").concat(c,"deg) scale(").concat(a,")"),zIndex:S}},i.a.createElement("div",{className:"face"}),i.a.createElement("div",{className:"back"}),i.a.createElement("div",{className:"click",style:{position:"absolute",top:0,left:-h,height:"160%",width:b+h}}))}))}));n(176);function T(e){var t=e.onReset,n=e.hasWon,c=Object(r.useRef)(!1),a=function(){var e=Object(r.useRef)(Date.now()),t=Object(r.useRef)(!0),n=Object(r.useRef)(0),i=Object(r.useRef)(),c=Object(r.useState)({startTime:Date.now(),difference:0}),a=Object(u.a)(c,2),o=a[0],s=a[1],d=function(){t.current&&(t.current=!1,n.current=n.current+(Date.now()-e.current),i.current=setInterval((function(){s((function(e){return Object(l.a)({},e,{difference:Date.now()-e.startTime-n.current})}))}),100))},f=function(){e.current=Date.now(),t.current=!0,clearInterval(i.current)};return Object(r.useEffect)((function(){return d(),I()((function(){document.hidden?f():d()})),f}),[]),{minutes:Math.floor(o.difference/1e3/60%60),seconds:Math.floor(o.difference/1e3%60),reset:function(){e.current=Date.now(),n.current=0,s({startTime:Date.now(),difference:0})}}}();return Object(r.useEffect)((function(){n&&!c.current&&(c.current=!0,setTimeout((function(){alert("You win! Your final time was ".concat(a.minutes," minutes, ").concat(a.seconds," seconds")),a.reset(),t(),c.current=!1}),1e3))}),[n,t,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:80}},i.a.createElement("span",null,"Solitaire")),i.a.createElement("div",{style:{width:80,textAlign:"center"}},i.a.createElement("span",null,"".concat(a.minutes.toString().padStart(2,"0")+":").concat(a.seconds.toString().padStart(2,"0")))),i.a.createElement("div",{style:{width:80,textAlign:"center"}},i.a.createElement("span",{onClick:function(){window.confirm("Start a new game?")&&(t(),a.reset())}},"+")))}var W={mouseY:0,mouseX:0},H=[0,1,2,3,4,5].map((function(e){return{cardPileIndex:-1,pileIndex:e,isEmpty:!0}}));var J=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(W),o=Object(u.a)(a,2),l=o[0],s=o[1],d=Object(r.useRef)({x:0,y:0}),f=Object(r.useRef)({x:0,y:0}),m=Object(r.useState)([]),p=Object(u.a)(m,2),x=p[0],v=p[1],b=Object(r.useState)(!1),I=Object(u.a)(b,2),j=I[0],E=I[1],Y=Object(r.useState)(O()),X=Object(u.a)(Y,2),k=X[0],C=X[1],F=Object(r.useState)(!1),A=Object(u.a)(F,2),B=A[0],J=A[1];return Object(r.useEffect)((function(){var e=function(e){return Object.values(h()(e,(function(e){return e.pileIndex}))).map((function(e){return e.sort((function(e,t){return e.cardPileIndex-t.cardPileIndex}))})).map((function(e){return{pile:e.map((function(e){return e.value})).join(""),index:e[0].pileIndex}})).filter((function(e){return"987654321"===e.pile})).map((function(e){return e.index}))}(k);B||e.length===x.length||(e.length>=4&&J(!0),setTimeout((function(){return v(e)}),500))}),[k,x,B]),N("resize",D()(M(),500)),N("pointerup",(function(e){var t=e.clientX,r=e.clientY,i=Math.abs(d.current.x-t),a=Math.abs(d.current.y-r),u=i>15||a>15;if(f.current={x:0,y:0},E(!1),n){var o=R(t,r,k);(o=P(o,k))&&C(y(k,n,o)),u&&c(null)}})),N("pointerdown",(function(e){var t=e.clientX,r=e.clientY,i=R(t,r,k);if(!i)return c(null);if(n){var a=P(i,k);C(y(k,n,a)),c(null)}else!i.isActive&&i.canMove&&c(i);var u=i.y,o=i.x;d.current={x:t,y:r},f.current={x:t-i.x,y:r-i.y},E(!0),s({mouseX:o,mouseY:u})})),N("pointermove",(function(e){var t=e.clientY,n=e.clientX,r=t-f.current.y,i=n-f.current.x;s({mouseY:r,mouseX:i})})),i.a.createElement("div",{className:"container"},i.a.createElement(T,{hasWon:B,onReset:function(){C(O()),J(!1)}}),[0,1,2,3,4,5].map((function(e){return i.a.createElement(z,{key:"pile-".concat(e),card:H[e]})})),k.map((function(e,t){var r=g(n,e);return i.a.createElement(z,{key:"card-".concat(t),card:e,activeCard:n,isActive:r,pileSize:w(e,k).length,canMove:S(e,k),isFinished:x.includes(e.pileIndex),mouseX:g(n,e)&&j?l.mouseX:-1,mouseY:g(n,e)&&j?l.mouseY:-1})})))};a.a.render(i.a.createElement(J,null),document.getElementById("root"))},61:function(e,t,n){e.exports=n(177)}},[[61,1,2]]]);
//# sourceMappingURL=main.454fb95a.chunk.js.map