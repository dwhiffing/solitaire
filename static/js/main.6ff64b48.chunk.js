(this.webpackJsonpsolitaire=this.webpackJsonpsolitaire||[]).push([[0],{175:function(e,n,t){},176:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(55),a=t.n(c),u=t(3),o=t(59),l=t(4),s=t(56),d=t.n(s),f=t(57),m=t.n(f),p=t(7),v=t.n(p),x=t(58),h=t.n(x),b="987654321".split("").map((function(e){return[{value:Number(e),suit:0},{value:Number(e),suit:1},{value:Number(e),suit:2},{value:Number(e),suit:3}]})).flat(),I=("987654321".split("").map((function(e){return{value:Number(e),suit:0}})).concat("987654321".split("").map((function(e){return{value:Number(e),suit:1}}))),function(){return m()(d()(b),6).map((function(e,n){return e.map((function(e,t){return Object(l.a)({},e,{cardPileIndex:t,pileIndex:n})}))})).flat().map((function(e,n){return Object(l.a)({},e,{index:n})}))}),j=function(e){return e.filter((function(n,t){return!e[t+1]||n===e[t+1]+1})).length===e.length},E=function(e,n,t){var i=y(n,e);if(n.isFinished||!t||t.isFinished)return e;var r=i.length-n.cardPileIndex,c=1===r&&!n.isCheat&&!t.isCheat,a=n.value!==t.value-1&&!t.isEmpty,u=i.slice(n.cardPileIndex,n.cardPileIndex+r),s=t.isEmpty||!t.isCheat&&j([t.value].concat(Object(o.a)(u.map((function(e){return e.value})))));return e.map((function(e){if(e.pileIndex!==n.pileIndex||n.pileIndex===t.pileIndex)return e;if(!u.map((function(e){return e.index})).includes(e.index))return e;if((s||c)&&!Number.isNaN(t.pileIndex)){var i=t.cardPileIndex+u.findIndex((function(n){return n.index===e.index}))+1;return Object(l.a)({},e,{pileIndex:t.pileIndex,cardPileIndex:i,isCheat:a})}return e}))};function O(e,n){var t=!1;return e&&(t=e.pileIndex===n.pileIndex&&e.cardPileIndex<=n.cardPileIndex),t}var y=function(e,n){return n.filter((function(n){return n.pileIndex===e.pileIndex})).sort((function(e,n){return e.cardPileIndex-n.cardPileIndex}))},g=function(e,n){if(!e)return null;if(e.isEmpty)return e;var t=y(e,n);return e=t[t.length-1],N(e,n)},w=function(e,n){var t=y(e,n),i=t.map((function(e){return e.value})).slice(e.cardPileIndex,t.length);return j(i)},P=function(e,n){Object(i.useEffect)((function(){return window.addEventListener(e,n),function(){return window.removeEventListener(e,n)}}),[e,n])},S=function(e,n,t){var i,r=document.elementFromPoint(e,n);if(r&&r.parentElement){var c=r.parentElement.dataset.index;if(c)i=t[+c];else{var a={cardPileIndex:-1,pileIndex:+r.parentElement.dataset.pileindex,isEmpty:!0};if(0===y(a,t).length)return Object(l.a)({},a,{},X(a))}}return N(i,t)},N=function(e,n){return e?Object(l.a)({},e,{},X(e,y(e,n).length),{canMove:w(e,n),isActive:O(e,n)}):null},Y=function(){var e=Object(i.useState)(0),n=Object(u.a)(e,2)[1];return function(){return n((function(e){return++e}))}},M=function(){var e,n,t=Object(i.useRef)(Date.now()),r=Object(i.useRef)(),c=Object(i.useState)({startTime:Date.now(),timeGone:0,difference:0}),a=Object(u.a)(c,2),o=a[0],s=a[1],d=function(){s((function(e){return Object(l.a)({},e,{timeGone:e.timeGone+(Date.now()-t.current)})})),r.current=setInterval((function(){s((function(e){return Object(l.a)({},e,{difference:Date.now()-e.startTime-e.timeGone})}))}),100)},f=function(){t.current=Date.now(),clearInterval(r.current)};return Object(i.useEffect)((function(){return d(),f}),[]),e="visibilitychange",n=function(){return document.hidden?f():d()},Object(i.useEffect)((function(){return document.addEventListener(e,n),function(){return document.removeEventListener(e,n)}}),[e,n]),{minutes:Math.floor(o.difference/1e3/60%60),seconds:Math.floor(o.difference/1e3%60),reset:function(){t.current=Date.now(),s({startTime:Date.now(),timeGone:0,difference:0})}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=v()(document.documentElement.clientWidth,740),t=v()(document.documentElement.clientHeight,740),i=document.querySelector(".card"),r=i.clientWidth,c=i.clientHeight,a=(n-6*r)/7,u=r+a,o=t<500?v()(e-10,0,10):0,l=t/15,s=n>450?30:20,d=v()(l-o,s),f=v()((t-(6.5*(d+o)+c))/2,40,1e3);return{width:u,height:d,yBuffer:f,xBuffer:a}},X=function(e,n){var t=R(n),i=t.width,r=t.height,c=t.yBuffer,a=t.xBuffer,u=(document.documentElement.clientWidth-(6*i-a))/2;return{x:e.pileIndex*i+u,y:e.isEmpty?c:c+(e.isFinished?0:e.cardPileIndex*r)}},k=t(8),C=t(20),F=t.n(C),D=["spades","clubs","hearts","diamonds"],A={stiffness:200,damping:20},B=r.a.memo((function(e){var n=e.card,t=e.activeCard,i=e.pileSize,c=e.isActive,a=e.isFinished,u=e.canMove,o=e.onRest,s=void 0===o?function(){}:o,d=e.mouseX,f=void 0===d?-1:d,m=e.mouseY,p=void 0===m?-1:m;P("resize",F()(Y(),500));var v=R(i),x=v.height,h=v.xBuffer,b=v.width,I=X(Object(l.a)({},n,{isFinished:a}),i),j=I.x,E=I.y,O=f>-1?x*Math.abs(t.cardPileIndex-n.cardPileIndex):0,y=f>-1?f:Object(k.spring)(j,A),g=p>-1?p+O:Object(k.spring)(E,A),w=Object(k.spring)(n.isCheat?17:0,A),S=Object(k.spring)(c?1.185:1,A),N=a?-1:f>-1?35+n.cardPileIndex:n.cardPileIndex,M=["card","rank".concat(n.value),a&&"finished",u&&"can-move",c&&"disable-touch",n.isEmpty&&"empty",D[n.suit]];return r.a.createElement(k.Motion,{style:{x:y,y:g,r:w,s:S},onRest:s},(function(e){var t=e.x,i=e.y,c=e.r,a=e.s;return r.a.createElement("div",{"data-index":n.index,"data-pileindex":n.pileIndex,className:M.join(" "),style:{transform:"translate3d(".concat(t,"px, ").concat(i,"px, 0) rotate(").concat(c,"deg) scale(").concat(a,")"),zIndex:N}},r.a.createElement("div",{className:"face"}),r.a.createElement("div",{className:"back"}),r.a.createElement("div",{className:"click",style:{position:"absolute",top:0,left:-h,height:"160%",width:b+h}}))}))}));t(175);function z(e){var n=e.onReset,t=e.hasWon,c=Object(i.useRef)(!1),a=M();return Object(i.useEffect)((function(){t&&!c.current&&(c.current=!0,setTimeout((function(){alert("You win! Your final time was ".concat(a.minutes," minutes, ").concat(a.seconds," seconds")),a.reset(),n(),c.current=!1}),1e3))}),[t,n,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:80}},r.a.createElement("span",null,"Solitaire")),r.a.createElement("div",{style:{width:80,textAlign:"center"}},r.a.createElement("span",null,"".concat(a.minutes.toString().padStart(2,"0")+":").concat(a.seconds.toString().padStart(2,"0")))),r.a.createElement("div",{style:{width:80,textAlign:"center"}},r.a.createElement("span",{onClick:function(){window.confirm("Start a new game?")&&(n(),a.reset())}},"+")))}var G={mouseY:0,mouseX:0},T=[0,1,2,3,4,5].map((function(e){return{cardPileIndex:-1,pileIndex:e,isEmpty:!0}}));var W=function(){var e=Object(i.useState)(null),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(G),o=Object(u.a)(a,2),l=o[0],s=o[1],d=Object(i.useRef)({x:0,y:0}),f=Object(i.useRef)({x:0,y:0}),m=Object(i.useState)([]),p=Object(u.a)(m,2),v=p[0],x=p[1],b=Object(i.useState)(!1),j=Object(u.a)(b,2),N=j[0],M=j[1],R=Object(i.useState)(I()),X=Object(u.a)(R,2),k=X[0],C=X[1],D=Object(i.useState)(!1),A=Object(u.a)(D,2),W=A[0],L=A[1];return Object(i.useEffect)((function(){var e=function(e){return Object.values(h()(e,(function(e){return e.pileIndex}))).map((function(e){return e.sort((function(e,n){return e.cardPileIndex-n.cardPileIndex}))})).map((function(e){return{pile:e.map((function(e){return e.value})).join(""),index:e[0].pileIndex}})).filter((function(e){return"987654321"===e.pile})).map((function(e){return e.index}))}(k);W||e.length===v.length||(e.length>=4&&L(!0),setTimeout((function(){return x(e)}),500))}),[k,v,W]),P("resize",F()(Y(),500)),P("pointerup",(function(e){var n=e.clientX,i=e.clientY,r=Math.abs(d.current.x-n),a=Math.abs(d.current.y-i),u=r>15||a>15;if(f.current={x:0,y:0},M(!1),t){var o=S(n,i,k);(o=g(o,k))&&C(E(k,t,o)),u&&c(null)}})),P("pointerdown",(function(e){var n=e.clientX,i=e.clientY,r=S(n,i,k);if(!r)return c(null);if(t){var a=g(r,k);C(E(k,t,a)),c(null)}else!r.isActive&&r.canMove&&c(r);var u=r.y,o=r.x;d.current={x:n,y:i},f.current={x:n-r.x,y:i-r.y},M(!0),s({mouseX:o,mouseY:u})})),P("pointermove",(function(e){var n=e.clientY,t=e.clientX,i=n-f.current.y,r=t-f.current.x;s({mouseY:i,mouseX:r})})),r.a.createElement("div",{className:"container"},r.a.createElement(z,{hasWon:W,onReset:function(){C(I()),L(!1)}}),[0,1,2,3,4,5].map((function(e){return r.a.createElement(B,{key:"pile-".concat(e),card:T[e]})})),k.map((function(e,n){var i=O(t,e);return r.a.createElement(B,{key:"card-".concat(n),card:e,activeCard:t,isActive:i,pileSize:y(e,k).length,canMove:w(e,k),isFinished:v.includes(e.pileIndex),mouseX:O(t,e)&&N?l.mouseX:-1,mouseY:O(t,e)&&N?l.mouseY:-1})})))};a.a.render(r.a.createElement(W,null),document.getElementById("root"))},60:function(e,n,t){e.exports=t(176)}},[[60,1,2]]]);
//# sourceMappingURL=main.6ff64b48.chunk.js.map