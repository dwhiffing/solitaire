(this.webpackJsonpsolitaire=this.webpackJsonpsolitaire||[]).push([[0],{173:function(e,n,t){},184:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),a=t(58),c=t.n(a),u=t(4),s=t(3),o=t(19),l=t(59),d=t.n(l),f=t(60),m=t.n(f),p=t(61),v=t.n(p),x="987654321".split("").map((function(e){return[{value:Number(e),suit:0},{value:Number(e),suit:1},{value:Number(e),suit:2},{value:Number(e),suit:3}]})).flat(),h=("987654321".split("").map((function(e){return{value:Number(e),suit:0}})).concat("987654321".split("").map((function(e){return{value:Number(e),suit:1}}))),function(){return m()(d()(x),6).map((function(e,n){return e.map((function(e,t){return Object(u.a)({},e,{cardPileIndex:t,pileIndex:n})}))})).flat().map((function(e,n){return Object(u.a)({},e,{index:n})}))}),b=function(e){return e.filter((function(n,t){return!e[t+1]||n===e[t+1]+1})).length===e.length},I=function(e,n,t){var i=O(n,e);if(n.isFinished||!t||t.isFinished)return e;var r=i.length-n.cardPileIndex,a=1===r&&!n.isCheat&&!t.isCheat,c=n.value!==t.value-1&&!t.isEmpty,s=i.slice(n.cardPileIndex,n.cardPileIndex+r),l=t.isEmpty||!t.isCheat&&b([t.value].concat(Object(o.a)(s.map((function(e){return e.value}))))),d=e.map((function(e){if(e.pileIndex!==n.pileIndex||n.pileIndex===t.pileIndex)return e;if(!s.map((function(e){return e.index})).includes(e.index))return e;if((l||a)&&!Number.isNaN(t.pileIndex)){var i=t.cardPileIndex+s.findIndex((function(n){return n.index===e.index}))+1;return Object(u.a)({},e,{pileIndex:t.pileIndex,cardPileIndex:i,isCheat:c})}return e})),f=Object.values(v()(d,(function(e){return e.pileIndex}))).map((function(e){return e.sort((function(e,n){return e.cardPileIndex-n.cardPileIndex}))})).map((function(e){return{pile:e.map((function(e){return e.value})).join(""),index:e[0].pileIndex}})).filter((function(e){return"987654321"===e.pile})).map((function(e){return e.index}));return d.map((function(e){return Object(u.a)({},e,{isFinished:f.includes(e.pileIndex)})}))};function j(e,n){var t=!1;return e&&(t=e.pileIndex===n.pileIndex&&e.cardPileIndex<=n.cardPileIndex),t}var O=function(e,n){return n.filter((function(n){return n.pileIndex===e.pileIndex})).sort((function(e,n){return e.cardPileIndex-n.cardPileIndex}))},E=function(e,n){if(!e)return null;if(e.isEmpty)return e;var t=O(e,n);return e=t[t.length-1],P(e,n)},g=function(e,n){var t=O(e,n),i=t.map((function(e){return e.value})).slice(e.cardPileIndex,t.length);return b(i)},y=function(e,n){Object(i.useEffect)((function(){return window.addEventListener(e,n),function(){return window.removeEventListener(e,n)}}),[e,n])},w=function(e,n,t){var i,r=document.elementFromPoint(e,n);if(r&&r.parentElement){var a=r.parentElement.dataset.index;if(a)i=t[+a];else{var c={cardPileIndex:-1,pileIndex:+r.parentElement.dataset.pileindex,isEmpty:!0};if(0===O(c,t).length)return Object(u.a)({},c,{},N(c))}}return P(i,t)},P=function(e,n){return e?Object(u.a)({},e,{},N(e),{canMove:g(e,n),isActive:j(e,n)}):null},M=function(){var e=window.innerWidth/6.2,n=Math.min(38,Math.max(window.innerHeight/16,25)),t=2*n;return window.innerWidth>1e3&&(t=3*(n=Math.min(50,Math.max(window.innerHeight/16,25)))),{width:e,height:n,yBuffer:t}},N=function(e){var n=M(),t=n.width,i=n.height,r=n.yBuffer;return{x:t/4+e.pileIndex*t,y:e.isEmpty?r:r+(e.isFinished?0:e.cardPileIndex*i)}},S=t(7),Y=["spades","clubs","hearts","diamonds"],X=function(e){var n=e.card,t=e.activeCard,i=e.onRest,a=void 0===i?function(){}:i,c=e.mouseX,u=void 0===c?0:c,s=e.mouseY,o=void 0===s?0:s,l=e.isPressed,d=M().height,f=N(n),m=f.x,p=f.y,v=n.isActive&&l,x=v?d*Math.abs(t.cardPileIndex-n.cardPileIndex):0,h=v?u:Object(S.spring)(m),b=v?o+x:Object(S.spring)(p),I=Object(S.spring)(n.isCheat?22:0),j=Object(S.spring)(n.isActive?1.185:1),O=v?35+n.cardPileIndex:n.cardPileIndex,E=["card",n.isFinished?"is-finished":"rank".concat(n.value),Y[n.suit],n.canMove&&"can-move",n.isActive&&"disable-touch",n.isEmpty&&"empty"];return r.a.createElement(S.Motion,{style:{x:h,y:b,r:I,s:j},onRest:a},(function(e){var t=e.x,i=e.y,a=e.r,c=e.s;return r.a.createElement(F,{card:n,classNames:E,style:{transform:"translate3d(".concat(t,"px, ").concat(i,"px, 0) rotate(").concat(a,"deg) scale(").concat(c,")"),zIndex:O}})}))},F=function(e){var n=e.card,t=e.classNames,i=void 0===t?[]:t,a=e.style,c=void 0===a?{}:a,u=["card"].concat(Object(o.a)(i),[n.isFinished?"is-finished":"rank".concat(n.value),Y[n.suit]]);return r.a.createElement("div",{"data-index":n.index,"data-pileindex":n.pileIndex,className:u.join(" "),style:c},r.a.createElement("div",{className:"face"}),n.isFinished&&r.a.createElement("div",{className:"back"}))},k=(t(173),t(62)),A=t.n(k),C=t(63),R=t.n(C);function W(e){var n=e.onReset,t=e.hasWon,a=Object(i.useRef)(!1),c=function(){var e=Object(i.useState)(Date.now()),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)({seconds:0,minutes:0,hours:0}),c=Object(s.a)(a,2),u=c[0],o=c[1];return Object(i.useEffect)((function(){var e=setInterval((function(){var n=Date.now()-t;o({hours:Math.floor(n/36e5%24),minutes:Math.floor(n/1e3/60%60),seconds:Math.floor(n/1e3%60),reset:function(){r(Date.now()),clearTimeout(e),o({seconds:0,minutes:0,hours:0})}})}),1e3);return function(){clearInterval(e)}}),[t]),u}();return Object(i.useEffect)((function(){t&&!a.current&&(a.current=!0,alert("You win! Your final time was ".concat(c.minutes," minutes, ").concat(c.seconds," seconds")),c.reset(),n(),a.current=!1)}),[t,n,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:80}},r.a.createElement("span",null,"Solitaire")),r.a.createElement("div",{style:{width:80,textAlign:"center"}},r.a.createElement("span",null,"".concat(c.minutes.toString().padStart(2,"0")+":").concat(c.seconds.toString().padStart(2,"0")))),r.a.createElement("div",{style:{width:80,textAlign:"center"}},r.a.createElement("span",{onClick:function(){window.confirm("Start a new game?")&&(n(),c.reset())}},"+")))}var B={startX:0,startY:0,mouseY:0,mouseX:0};var D=function(){var e=Object(i.useState)(null),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(B),o=Object(s.a)(c,2),l=o[0],d=o[1],f=Object(i.useRef)({x:0,y:0}),m=Object(i.useState)(!1),p=Object(s.a)(m,2),v=p[0],x=p[1],b=Object(i.useState)(h()),O=Object(s.a)(b,2),P=O[0],M=O[1],N=Object(i.useState)(!1),S=Object(s.a)(N,2),Y=S[0],F=S[1];return Object(i.useEffect)((function(){R()(P.filter((function(e){return e.isFinished})).map((function(e){return e.pileIndex}))).length>=4&&!Y&&F(!0)}),[P,Y]),y("resize",A()(function(){var e=Object(i.useState)(0),n=Object(s.a)(e,2)[1];return function(){return n((function(e){return++e}))}}(),500)),y("pointerup",(function(e){var n=e.pageX,i=e.pageY,r=Math.abs(l.startX-n),c=Math.abs(l.startY-i),u=r>40||c>40;if(x(!1),t){var s=w(n,i,P);(s=E(s,P))&&M(I(P,t,s)),u&&a(null)}})),y("pointerdown",(function(e){var n=e.pageX,i=e.pageY;x(!0);var r=w(n,i,P);if(!r)return a(null);if(t){var c=E(r,P);M(I(P,t,c)),a(null)}else!r.isActive&&r.canMove&&a(r);var u=r.y,s=r.x;f.current={x:n-r.x,y:i-r.y},d({mouseX:s,mouseY:u,startX:n,startY:i})})),y("pointermove",(function(e){var n=e.pageY,t=e.pageX,i=n-f.current.y,r=t-f.current.x;d(Object(u.a)({},l,{mouseY:i,mouseX:r}))})),r.a.createElement("div",{className:"container"},r.a.createElement(W,{hasWon:Y,onReset:function(){M(h()),F(!1)}}),[0,1,2,3,4,5].map((function(e){return r.a.createElement(X,{key:"pile-".concat(e),card:{cardPileIndex:-1,pileIndex:e,isEmpty:!0}})})),P.map((function(e,n){return r.a.createElement(X,{key:"card-".concat(n),card:Object(u.a)({},e,{isActive:j(t,e),canMove:g(e,P)}),activeCard:t,isPressed:v,mouseX:l.mouseX,mouseY:l.mouseY})})))};c.a.render(r.a.createElement(D,null),document.getElementById("root"))},64:function(e,n,t){e.exports=t(184)}},[[64,1,2]]]);
//# sourceMappingURL=main.a3528645.chunk.js.map