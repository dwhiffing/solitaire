(this.webpackJsonpsolitaire=this.webpackJsonpsolitaire||[]).push([[0],{173:function(e,n,t){},184:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t.n(i),r=t(57),c=t.n(r),u=t(3),s=t(4),o=t(63),l=t(58),d=t.n(l),p=t(59),f=t.n(p),m=t(60),x=t.n(m),v="987654321".split("").map((function(e){return[{value:Number(e),suit:0},{value:Number(e),suit:1},{value:Number(e),suit:2},{value:Number(e),suit:3}]})).flat(),b=("987654321".split("").map((function(e){return{value:Number(e),suit:0}})).concat("987654321".split("").map((function(e){return{value:Number(e),suit:1}}))),function(){return f()(d()(v),6).map((function(e,n){return e.map((function(e,t){return Object(u.a)({},e,{cardPileIndex:t,pileIndex:n})}))})).flat().map((function(e,n){return Object(u.a)({},e,{index:n})}))}),I=function(e){return e.filter((function(n,t){return!e[t+1]||n===e[t+1]+1})).length===e.length},h=function(e,n,t){var i=E(n,e);if(n.isFinished||t.isFinished)return e;var a=i.length-n.cardPileIndex,r=1===a&&!n.isCheat&&!t.isCheat,c=n.value!==t.value-1&&!t.isEmpty,s=i.slice(n.cardPileIndex,n.cardPileIndex+a),l=t.isEmpty||!t.isCheat&&I([t.value].concat(Object(o.a)(s.map((function(e){return e.value}))))),d=e.map((function(e){if(e.pileIndex!==n.pileIndex||n.pileIndex===t.pileIndex)return e;if(!s.map((function(e){return e.index})).includes(e.index))return e;if((l||r)&&!Number.isNaN(t.pileIndex)){var i=t.cardPileIndex+s.findIndex((function(n){return n.index===e.index}))+1;return Object(u.a)({},e,{pileIndex:t.pileIndex,cardPileIndex:i,isCheat:c})}return e})),p=Object.values(x()(d,(function(e){return e.pileIndex}))).map((function(e){return e.sort((function(e,n){return e.cardPileIndex-n.cardPileIndex}))})).map((function(e){return{pile:e.map((function(e){return e.value})).join(""),index:e[0].pileIndex}})).filter((function(e){return"987654321"===e.pile})).map((function(e){return e.index}));return d.map((function(e){return Object(u.a)({},e,{isFinished:p.includes(e.pileIndex)})}))};function j(e,n){var t=!1;return e&&(t=e.pileIndex===n.pileIndex&&e.cardPileIndex<=n.cardPileIndex),t}var E=function(e,n){return n.filter((function(n){return n.pileIndex===e.pileIndex})).sort((function(e,n){return e.cardPileIndex-n.cardPileIndex}))},O=function(e,n){var t=E(e,n),i=t.map((function(e){return e.value})).slice(e.cardPileIndex,t.length);return I(i)},w=function(e,n){Object(i.useEffect)((function(){return window.addEventListener(e,n),function(){return window.removeEventListener(e,n)}}),[e,n])},P=t(7),g=["spades","clubs","hearts","diamonds"],M=function(e){var n=e.card,t=e.activeCard,i=e.onMouseDown,r=e.onMouseUp,c=e.cursorState,u=c.isPressed&&n.isActive&&n.canMove,s=Math.min(38,Math.max(window.innerHeight/16,25)),o=2*s;window.innerWidth>1e3&&(o=3*(s=Math.min(50,Math.max(window.innerHeight/16,25))));var l=window.innerWidth/6.2,d=u?s*Math.abs(t.cardPileIndex-n.cardPileIndex):0,p=Object(P.spring)(n.isCheat?22:0),f=Object(P.spring)(n.isActive?1.185:1),m=c.mouseX,x=c.mouseY,v=l/4+n.pileIndex*l,b=n.isEmpty?o:o+(n.isFinished?0:n.cardPileIndex*s),I=u?m:Object(P.spring)(v),h=u?x+d:Object(P.spring)(b),j=["card",n.isFinished?"is-finished":"rank".concat(n.value),g[n.suit],u&&"disable-touch",n.isEmpty&&"empty"];return a.a.createElement(P.Motion,{style:{x:I,y:h,r:p,s:f}},(function(e){var t=e.x,c=e.y,s=e.r,o=e.s;return a.a.createElement("div",{onPointerDown:n.isFinished?null:i.bind(null,n,t,c),onPointerUp:n.isFinished?null:r.bind(null,n,t,c),"data-index":n.index,"data-pileindex":n.pileIndex||0,className:j.join(" "),style:{transform:"translate3d(".concat(t,"px, ").concat(c,"px, 0) rotate(").concat(s,"deg) scale(").concat(o,")"),zIndex:u?35+n.cardPileIndex:n.cardPileIndex}},a.a.createElement("div",{className:"face"}),n.isFinished&&a.a.createElement("div",{className:"back"}))}))},y=(t(173),t(61)),Y=t.n(y),S=t(62),X=t.n(S),N={startX:0,startY:0,mouseY:0,mouseX:0};var D=function(){var e=Object(i.useState)(null),n=Object(s.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(N),o=Object(s.a)(c,2),l=o[0],d=o[1],p=Object(i.useState)(b()),f=Object(s.a)(p,2),m=f[0],x=f[1],v=Object(i.useRef)(!1);w("resize",Y()(function(){var e=Object(i.useState)(0),n=Object(s.a)(e,2)[1];return function(){return n((function(e){return++e}))}}(),500));var I=function(){var e=Object(i.useState)(Date.now()),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(i.useState)({seconds:0,minutes:0,hours:0}),c=Object(s.a)(r,2),u=c[0],o=c[1];return Object(i.useEffect)((function(){setTimeout((function(){var e=Date.now()-t;o({hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60),reset:function(){return a(Date.now())}})}),1e3)})),u}();Object(i.useEffect)((function(){if(X()(m.filter((function(e){return e.isFinished})).map((function(e){return e.pileIndex}))).length>=2&&!v.current){v.current=!0;var e=I.seconds+60*I.minutes;setTimeout((function(){alert("You win! Your final time was ".concat(e," seconds")),x(b()),I.reset(),v.current=!1}),1e3)}}),[m,I]);var P=function(e,n,i,a){var c=a.pageX,u=a.pageY;t?(x(h(m,t,e)),r(null)):e.isActive||!e.canMove||!t&&e.isEmpty?r(null):r(e),d({topDeltaY:u-i,topDeltaX:c-n,mouseY:i,mouseX:n,startX:c,startY:u,isPressed:!0,pressedIndex:e.index})},g=function(e,n,i,a){var r=Math.abs(l.startX-a.pageX),c=Math.abs(l.startY-a.pageY);if(t&&"number"===typeof l.pressedIndex&&(r>10||c>10)){var s=function(e,n,t){var i,a=document.elementFromPoint(e,n);if(a&&a.parentElement){var r=a.parentElement.dataset.index;if(r)i=t[+r];else{var c={cardPileIndex:-1,pileIndex:+a.parentElement.dataset.pileindex,isEmpty:!0,canMove:!0};0===E(c,t).length&&(i=Object(u.a)({},c))}}if(i&&!i.isEmpty){var s=E(i,t);i=s[s.length-1]}return i}(a.clientX,a.clientY,m);t&&s&&x(h(m,t,s))}};return w("pointerup",(function(e){var n=Math.abs(l.startX-e.pageX),i=Math.abs(l.startY-e.pageY);t&&"number"===typeof l.pressedIndex&&n<10&&i<10||r(null),d(Object(u.a)({},l,{isPressed:!1,pressedIndex:null,topDeltaY:0}))})),w("pointermove",(function(e){var n=e.pageY,t=e.pageX,i=l.isPressed,a=l.topDeltaY,r=l.topDeltaX;if(i){var c=n-a,s=t-r;d(Object(u.a)({},l,{mouseY:c,mouseX:s}))}})),a.a.createElement("div",{className:"container"},a.a.createElement("div",{style:{width:80}},a.a.createElement("span",null,"Solitaire")),a.a.createElement("div",{style:{width:80,textAlign:"center"}},a.a.createElement("span",null,"".concat(I.minutes.toString().padStart(2,"0")+":").concat(I.seconds.toString().padStart(2,"0")))),a.a.createElement("div",{style:{width:80,textAlign:"center"}},a.a.createElement("span",{onClick:function(){window.confirm("Start a new game?")&&(I.reset(),x(b()))}},"+")),[0,1,2,3,4,5].map((function(e){return a.a.createElement(M,{key:"pile-".concat(e),card:{cardPileIndex:-1,pileIndex:e,isEmpty:!0,canMove:!0},onMouseUp:g,cursorState:l,onMouseDown:P})})),m.map((function(e,n){return a.a.createElement(M,{key:"card-".concat(n),card:Object(u.a)({},e,{isCheat:!!e.isCheat,isActive:j(t,e),canMove:O(e,m),pileIndex:e.pileIndex,cardPileIndex:e.cardPileIndex}),activeCard:t,cursorState:l,onMouseUp:g,onMouseDown:P})})))};c.a.render(a.a.createElement(D,null),document.getElementById("root"))},64:function(e,n,t){e.exports=t(184)}},[[64,1,2]]]);
//# sourceMappingURL=main.c3e37234.chunk.js.map